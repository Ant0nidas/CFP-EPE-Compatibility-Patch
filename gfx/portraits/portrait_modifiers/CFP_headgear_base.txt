# Tags:
# rank_headgear: any headgear that signifies a certain title. crowns, pope hat etc.

# Valid culture inputs

# CULTURE_INPUT = dde_abbasid
# CULTURE_INPUT = dde_hre
# CULTURE_INPUT = byzantine
# CULTURE_INPUT = indian
# CULTURE_INPUT = mena
# CULTURE_INPUT = northern
# CULTURE_INPUT = western
# CULTURE_INPUT = western_era1
# CULTURE_INPUT = western_era2
# CULTURE_INPUT = western_era3
# CULTURE_INPUT = western_era4
# CULTURE_INPUT = steppe
# CULTURE_INPUT = fp1_norse
# CULTURE_INPUT = fp2_iberian_christian
# CULTURE_INPUT = fp2_iberian_muslim

# Valid CFP culture inputs

# CULTURE_INPUT = cfp_norse
# CULTURE_INPUT = cfp_anglo_saxon
# CULTURE_INPUT = cfp_norman
# CULTURE_INPUT = cfp_norman_sicily
# CULTURE_INPUT = cfp_hungarian
# CULTURE_INPUT = cfp_turkic
# CULTURE_INPUT = cfp_dde_turkic
# CULTURE_INPUT = cfp_oghuz
# CULTURE_INPUT = cfp_slavic
# CULTURE_INPUT = cfp_latin
# CULTURE_INPUT = cfp_iberian_christian
# CULTURE_INPUT = cfp_iberian_muslim
# CULTURE_INPUT = cfp_iranian
# CULTURE_INPUT = cfp_berber
# CULTURE_INPUT = cfp_egyptian
# CULTURE_INPUT = cfp_east_africa
# CULTURE_INPUT = cfp_central_africa
# CULTURE_INPUT = cfp_west_africa
# CULTURE_INPUT = cfp_afar
# CULTURE_INPUT = cfp_burmese
# CULTURE_INPUT = cfp_tibetan
# CULTURE_INPUT = cfp_tibetan
# CULTURE_INPUT = cfp_jewish_western
# CULTURE_INPUT = cfp_jewish_mena
# CULTURE_INPUT = cfp_jewish_andalusian
# CULTURE_INPUT = cfp_jewish

cfp_headgear_base = {

	usage = game
	selection_behavior = weighted_random
	priority = 1

## Crusader hood
	cfp_crusades_western_commoner = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_crusades_western_commoner
				range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 }
			}
		}	
		outfit_tags = { western_crusades_commoner }
		weight = {
			base = 0
			modifier = {
				add = 110
				exists = this
				OR = {
					AND = {
						has_council_position = councillor_spymaster
						highest_held_title_tier < tier_county
					}
					AND = {
						portrait_has_trait_trigger = { TRAIT = witch }
						is_landed = no
						is_lowborn = yes
					}
				}
				OR = {
					portrait_western_clothing_trigger = yes
					AND = {
						portrait_northern_clothing_trigger = yes
						NOT = { is_theocratic_lessee = yes }
					}
				}
			}
		}
	}
	
	cfp_crusades_western = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_crusades_western
				range = { 0 0.49 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		outfit_tags = { western_crusades_white }
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_western_crusades_trigger = yes
				NOR = {
					highest_held_title_tier > tier_county
					portrait_wear_helmet_trigger = yes
				}
			}
		}
	}
	
	cfp_crusades_western_black = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_crusades_western
				range = { 0.51 1.0 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		outfit_tags = { western_crusades_black }
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_western_crusades_trigger = yes
				NOR = {
					highest_held_title_tier > tier_county
					portrait_wear_helmet_trigger = yes
				}
			}
		}
	}

## Latin

	cfp_latin_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_latin_common
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = cfp_latin
				}
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {
					CULTURE_INPUT = cfp_latin
				}
			}
		}
	}

	cfp_latin_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_latin_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_latin } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = cfp_latin 
                }
			}
		}
	}

	cfp_latin_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_latin_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_era2_trigger = yes
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_latin
                }
			}
		}
	}
	
## Iberian

	cfp_iberian_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_iberian_common
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_iberian_christian
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_iberian_christian
                }
			}
            modifier = {
                factor = 0  # Should NOT show up if FP2 is active since they are included in FP2 genes
                has_fp2_dlc_trigger = yes
            }
		}
	}

	cfp_iberian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_iberian_low_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_iberian_christian } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = cfp_iberian_christian 
                }
			}
            modifier = {
                factor = 0  # Should NOT show up if FP2 is active since they are included in FP2 genes
                has_fp2_dlc_trigger = yes
            }
		}
	}

	cfp_iberian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_iberian_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_iberian_christian
                }
			}
            modifier = {
                factor = 0  # Should NOT show up if FP2 is active since they are included in FP2 genes
                has_fp2_dlc_trigger = yes
            }
		}
	}

## Hungarian

	cfp_hungarian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_hungarian_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_hungarian
                }   
			}
		}
	}
	
## Slavic

	cfp_slavic_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_slavic_commoner
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				NOT = { portrait_byzantine_clothing_trigger = yes }
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }
			}
			modifier = {
				add = 20
				NOT = { portrait_byzantine_clothing_trigger = yes }	
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }
			}
		}
	}

	cfp_slavic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_slavic_low_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_slavic } 
			modifier = {
				add = 60
				portrait_northern_clothing_trigger = yes
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = cfp_slavic 
                }
			}
			modifier = {
				add = -10
				OR = {
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_balto_finnic 
					}
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_east_slav 
					}
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_south_slav 
					}
				}
			}
		}
	}

	cfp_slavic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_slavic_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_northern_clothing_trigger = yes
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }   
			}
			modifier = {
				add = -10
				OR = {
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_balto_finnic 
					}
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_east_slav 
					}
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_south_slav 
					}
				}
			}
		}
	}

	cfp_slavic_royalty_north = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_slavic_royalty
				range = { 0.51 1.0 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				OR = {
					portrait_northern_clothing_trigger = yes
					portrait_western_clothing_trigger = yes
				}
                portrait_royalty_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }
			}
			modifier = {
				add = -10
				OR = {
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_balto_finnic 
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_east_slav 
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_south_slav 
					}
				}
			}
		}
	}
	
	cfp_slavic_royalty_south = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_slavic_royalty
				range = { 0 0.49 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_byzantine_clothing_trigger = yes
                portrait_royalty_trigger = {
                    CULTURE_INPUT = cfp_slavic
                }
			}
			modifier = {
				add = -10
				OR = {
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_balto_finnic 
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_east_slav 
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_south_slav 
					}
				}
			}
		}
	}

	cfp_slavic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_slavic_imperial
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_imperial_trigger = {
                    CULTURE_INPUT = cfp_slavic 
                }
			}
			modifier = {
				add = -10
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_balto_finnic 
					}
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_west_slav 
					}
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_east_slav 
					}
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_south_slav 
					}
				}
			}
		}
	}

## JAVANESE ##

	cfp_burmese_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_burmese
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_burmese
                }
			}
		}
	}

	cfp_burmese_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_javanese_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = cfp_burmese 
                }
			}
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_burmese
                }   
			}
		}
	}

	cfp_burmese_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_javanese_royalty
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_royalty_trigger = {
                    CULTURE_INPUT = cfp_burmese
                }   
			}
		}
	}

## Indians


	cfp_indian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_indian_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				NOT = { is_female = yes }
				portrait_era4_trigger = yes
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = indian
                }   
			}
		}
	}

## Egyptians

	cfp_egyptian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_egyptian_common
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_egyptian
                }
				portrait_era4_trigger = yes
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_egyptian
                }
				portrait_era4_trigger = yes
			}
		}
	}
	
## Berbers
	cfp_berber_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_berber_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_berber
                }
			}
            modifier = {
                factor = 0  # Should NOT show up if AFR is active since they are included in FP3 genes
                has_afr_dlc_trigger = yes 
            }
		}
	}

##  Iranians ##

	cfp_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_iranian_common
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_iranian
                }
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = cfp_iranian 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_iranian
                }
			}
			modifier = {
				factor = 0
				OR = {
					has_fp3_dlc_trigger = yes
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_islamic_iranian
					}
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_non_islamic_iranian
					}
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_eastern_non_islamic_iranian
					}
					portrait_commoner_clothing_trigger = {
						CULTURE_INPUT = epe_hindu_iranian
					}
					AND = {
						portrait_commoner_clothing_trigger = {
							CULTURE_INPUT = epe_tahirid 
						}
						portrait_era1_trigger = yes
					} 
				}
			}
		}
	}

	cfp_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_iranian_low_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_iranian } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = cfp_iranian
                }
			}
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = cfp_iranian
				}
			}
            modifier = {
                factor = 0  # Should NOT show up if FP3 is active since they are included in FP3 genes
                OR = {
					has_fp3_dlc_trigger = yes
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_islamic_iranian
					}
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_non_islamic_iranian
					}
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_eastern_non_islamic_iranian
					}
					portrait_low_nobles_clothing_trigger = {
						CULTURE_INPUT = epe_hindu_iranian
					}
					AND = {
						portrait_low_nobles_clothing_trigger = {
							CULTURE_INPUT = epe_tahirid 
						}
						portrait_era1_trigger = yes
					} 
				}
            }
		}
	}

	cfp_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_iranian_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_iranian
                }   
			}
            modifier = {
                factor = 0  # Should NOT show up if FP3 is active since they are included in FP3 genes
				OR = {
					has_fp3_dlc_trigger = yes
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_islamic_iranian
					}
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_non_islamic_iranian
					}
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_eastern_non_islamic_iranian
					}
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_hindu_iranian
					}
					AND = {
						portrait_high_nobles_headgear_trigger = {
							CULTURE_INPUT = epe_tahirid 
						}
						portrait_era1_trigger = yes
					} 
				}
            }
		}
	}

## turkic ##

	cfp_turkic_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_turkic_common
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_turkic
                }
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = cfp_turkic 
                }
				NOR = {
					portrait_western_clothing_trigger = yes
					portrait_byzantine_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = cfp_turkic 
                }
			}
			modifier = {
				factor = 0
                OR = {
					portrait_commoner_clothing_trigger = {  
						CULTURE_INPUT = epe_eastern_turk 
					}
					portrait_commoner_clothing_trigger = {  
						CULTURE_INPUT = epe_eastern_turk_muslim 
					}
					portrait_commoner_clothing_trigger = {  
						CULTURE_INPUT = epe_seljuk 
					}
					portrait_commoner_clothing_trigger = {  
						CULTURE_INPUT = epe_uyghur 
					}
				}
			}
		}
	}

	cfp_turkic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_turkic_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_turkic } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = cfp_turkic
                }
			}
            modifier = {
                factor = 0  # Should NOT show up if FP3 is active since they are included in FP3 genes
                has_fp3_dlc_trigger = yes
            }
		}
	}

	cfp_turkic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_turkic_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_turkic
                }   
			}
			modifier = {
				add = -10
				OR = {
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_eastern_turk
					}
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_seljuk
					}
					portrait_high_nobles_headgear_trigger = {
						CULTURE_INPUT = epe_uyghur
					}
				}
			}
		}
	}

	cfp_turkic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_turkic_royalty
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = cfp_turkic
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = cfp_turkic
					}   
				}
			}
			modifier = {
				add = -10
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_eastern_turk
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_eastern_turk
					}
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_eastern_turk_muslim
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_uyghur
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_uyghur
					}
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_seljuk
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_seljuk
					}					
				}
			}
		}
	}

	cfp_oghuz_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_oghuz_low_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_oghuz } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = cfp_oghuz
                }
			}
			modifier = {
				add = -10
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
			}
		}
	}

	cfp_oghuz_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_oghuz_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_oghuz
                }
			}
			modifier = {
				add = -51
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }			
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 				
			}
		}
	}

## Africans ##

	cfp_west_african_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_west_african_low_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_west_africa } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = cfp_west_africa
                }
			}
		}
	}

	cfp_west_african_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_west_african_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_west_africa
                }
			}
		}
	}

	cfp_east_african_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_east_african_common
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = cfp_east_africa
                }
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = cfp_east_africa 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = cfp_east_africa
                }
			}
		}
	}

	cfp_east_african_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_east_african_low_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_east_africa } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = cfp_east_africa
                }
			}
		}
	}

	cfp_east_african_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_east_african_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_east_africa
                }   
			}
		}
	}

	cfp_east_african_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_east_african_imperial
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_imperial_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_east_africa 
                }
			}
		}
	}

	cfp_central_african_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_central_african_low_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = cfp_central_africa } 
			modifier = {
				add = 60
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = cfp_central_africa
                }
			}
		}
	}

	cfp_central_african_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_CFP
				template = cfp_central_african_high_nobility
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = cfp_central_africa
                }   
			}
		}
	}
	
# ## FP3 Iranian ##

# 	fp3_iranian_low_nobles = {
# 		dna_modifiers = {
# 			accessory = {
# 				mode = add
# 				gene = headgear
# 				template = fp3_iranian_low_nobility
# 				range = { 0 1 } # For the randomness to work correctly
# 			}
# 		}
# 		weight = {
# 			base = 0
# 			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = fp3_iranian } 
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_low_nobles_clothing_trigger = {
# 					CULTURE_INPUT = fp3_iranian
# 				}
# 			}
# 		}
# 	}

# 	fp3_iranian_high_nobles = {
# 		dna_modifiers = {
# 			accessory = {
# 				mode = add
# 				gene = headgear
# 				template = fp3_iranian_nobility
# 				range = { 0 1 } # For the randomness to work correctly
# 			}
# 		}
# 		weight = {
# 			base = 0
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_high_nobles_headgear_trigger = {
# 					CULTURE_INPUT = fp3_iranian
# 				}   
# 			}
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_high_nobles_headgear_trigger = {
# 					CULTURE_INPUT = fp3_iranian
# 				}
# 				is_female = yes	   
# 			}
# 		}
# 	}

# 	fp3_iranian_royalty = {
# 		dna_modifiers = {
# 			accessory = {
# 				mode = add
# 				gene = headgear
# 				template = fp3_iranian_royalty
# 				range = { 0 1 } # For the randomness to work correctly
# 			}
# 		}
# 		weight = {
# 			base = 0
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_royalty_trigger = {
# 					CULTURE_INPUT = fp3_iranian
# 				}   
# 			}
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_royalty_trigger = {
# 					CULTURE_INPUT = fp3_iranian
# 				} 
# 				is_female = yes  
# 			}	
# 		}
# 	}

# 	fp3_iranian_imperial = {
# 		dna_modifiers = {
# 			accessory = {
# 				mode = add
# 				gene = headgear
# 				template = fp3_iranian_imperial
# 				range = { 0 1 } # For the randomness to work correctly
# 			}
# 		}
# 		weight = {
# 			base = 0
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_imperial_trigger = {
# 					CULTURE_INPUT = fp3_iranian
# 				}   
# 			}
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_imperial_trigger = {
# 					CULTURE_INPUT = fp3_iranian
# 				}
# 				is_female = yes   
# 			}
# 		}
# 	}

# ## FP3 Turkic ##

# 	fp3_turkic_low_nobles = {
# 		dna_modifiers = {
# 			accessory = {
# 				mode = add
# 				gene = headgear
# 				template = fp3_turkic_low_nobility
# 				range = { 0 1 } # For the randomness to work correctly
# 			}
# 		}
# 		weight = {
# 			base = 0
# 			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = fp3_turkic } 
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_low_nobles_clothing_trigger = {
# 					CULTURE_INPUT = fp3_turkic
# 				}
# 			}
# 		}
# 	}

# 	fp3_turkic_high_nobles = {
# 		dna_modifiers = {
# 			accessory = {
# 				mode = add
# 				gene = headgear
# 				template = fp3_turkic_nobility
# 				range = { 0 1 } # For the randomness to work correctly
# 			}
# 		}
# 		weight = {
# 			base = 0
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_high_nobles_headgear_trigger = {
# 					CULTURE_INPUT = fp3_turkic
# 				}   
# 			}
# 			modifier = {
# 				add = 51 # Slightly higher
# 				portrait_high_nobles_headgear_trigger = {
# 					CULTURE_INPUT = fp3_turkic
# 				}
# 				is_female = yes   
# 			}
# 		}
# 	}

	############################################################################################################################################
	######################################################### EPE ADDED  ###############################################################
	############################################################################################################################################
	

## EPE ADDED HEADWEAR MODIFIERS ##
	
#	bulgarian_royalty = {
#		dna_modifiers = {
#			accessory = {
#				mode = add
#				gene = headgear
#				template = bulgarian_royalty
#				range = { 0 1 } # For the randomness to work correctly
#			}
#		}
#		weight = {
#			base = 0
#			modifier = {
#				add = 100
#				portrait_simeon_crown_trigger = yes
#			}
#			modifier = {
#				add = 100
#				portrait_simeon_crown_trigger = yes
#				is_female = yes
#			}
#		}
#	}
#

####################################################################################################
##################
###Bulgarian
##################
####################################################################################################

	bulgarian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bulgarian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }
			}
		}
	}

	bulgarian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bulgarian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_bulgarian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_bulgarian 
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_bulgarian 
                }
				is_female = yes 
			}
		}
	}

	bulgarian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bulgarian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }
				is_female = yes    
			}
		}
	}

	bulgarian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bulgarian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }
				is_female = yes    
			}
		}
	}

	bulgarian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bulgarian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_bulgarian 
                }
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_bulgarian 
                }
				is_female = yes 
			}
		}
	}

####################################################################################################
##################
###South Slav
##################
####################################################################################################

	south_slav_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_slav_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }
			}
		}
	}

	south_slav_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_slav_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_south_slav } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_south_slav 
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_south_slav 
                }
				is_female = yes 
			}
		}
	}

	south_slav_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_slav_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }
				is_female = yes    
			}
		}
	}

	south_slav_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_slav_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }
				is_female = yes   
			}
		}
	}

	south_slav_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_slav_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_south_slav 
                }
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_south_slav 
                }
				is_female = yes 
			}
		}
	}

	### Croatia Kingdom titles	 ###
	croatian_title_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = croatia_title_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_crown_of_zvonimir_trigger = yes
			}
			modifier = {
				add = 100
				portrait_crown_of_zvonimir_trigger = yes
				is_female = yes
			}
		}
	}

	### Crown of Castille
	epe_iberian_castilian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_royalty
				range = { 0 1 }
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
				exists = this
				NOR = {
					portrait_wear_no_headgear_trigger = yes
					portrait_wear_helmet_trigger = yes
				}
				portrait_religious_christian_trigger = yes
				OR = {
					AND = {
						exists = this
						has_primary_title = title:k_castille
					}
					AND = {
						exists = primary_title
						has_primary_title = title:e_spain
						has_title = title:k_castille
					}
				}
			}
		}
	}

####################################################################################################
##################
###Georgian
##################
####################################################################################################

	georgian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = georgian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_georgian
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_georgian
                }
			}
		}
	}

	georgian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = georgian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_georgian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_georgian 
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_georgian 
                }
				is_female = yes
			}
		}
	}

	georgian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = georgian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_georgian
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_georgian
                }
				is_female = yes   
			}
		}
	}

	georgian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = georgian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_georgian
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_georgian
                }
				is_female = yes   
			}
		}
	}

	georgian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = georgian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_georgian 
                }
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_georgian 
                }
				is_female = yes
			}
		}
	}

####################################################################################################
##################
###Armenian
##################
####################################################################################################


	armenian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = armenian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_armenian
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_armenian
                }
			}
		}
	}

	armenian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = armenian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_armenian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_armenian 
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_armenian 
                }
				is_female = yes 
			}
		}
	}

	armenian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = armenian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_armenian
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_armenian
                }
				is_female = yes    
			}
		}
	}

	armenian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = armenian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_armenian
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_armenian
                }
				is_female = yes    
			}
		}
	}

	armenian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = armenian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_armenian 
                }
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_armenian 
                }
				is_female = yes 
			}
		}
	}

####################################################################################################
##################
###English/Norman
##################
####################################################################################################

	english_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_english
				}
				NOT = { has_ep2_dlc_trigger = yes }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {
					CULTURE_INPUT = epe_english
				}
				NOT = { has_ep2_dlc_trigger = yes }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
		}
	}

    ep2_english_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = northern_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_english
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_english
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes 
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
            }
        }
    }

    ep2_english_era2_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = western_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_english
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_english
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era2_trigger = yes    
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
            }
        }
    }

    ep2_english_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ep2_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_english
				}
				has_ep2_dlc_trigger = yes 
                OR = {
					portrait_era3_trigger = yes 
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_english
                } 
                has_ep2_dlc_trigger = yes   
                OR = {
              		portrait_era3_trigger = yes    
					portrait_era4_trigger = yes
                }  
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
            }
        }
    }
    
    fp4_english_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear_2
                template = fp4_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_english
				}
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_religious_christian_trigger = yes
				}    
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_english
                } 
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }  
				NOT = {
					portrait_religious_christian_trigger = yes
				}      
            }
        }
    }	

	english_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_english
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                NOT = { has_ep2_dlc_trigger = yes }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
		}
	}

	ep2_english_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_english
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
		}
	}

	ep2_english_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_english
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}					
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}					
			}
		}
	}

	ep2_english_era3_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era3_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_english
				}
				has_ep2_dlc_trigger = yes 
				portrait_era3_trigger = yes 
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
		}
	}

	english_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }				
                NOT = { has_ep2_dlc_trigger = yes }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
		}
	}

	ep2_english_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes 
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
		}
	}

	ep2_english_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }					
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes 
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }					
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
		}
	}

	ep2_english_era3_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
                }
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
                }
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }
				is_female = yes 	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}

		}
	}
	
	ep2_english_era4_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }				
				is_female = yes 	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}

		}
	}	
	
	english_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}					
                NOT = { has_ep2_dlc_trigger = yes }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
		}
	}

	ep2_english_era2_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes 
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}					
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes 
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
		}
	}

	ep2_english_era3_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
                }
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}					
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
                }
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
				is_female = yes 	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}

		}
	}


	english_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_english 
				}
				NOT = { has_ep2_dlc_trigger = yes }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
		}
	}

	ep1_english_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_english 
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_english 
				}
				is_female = yes 
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
					portrait_era2_trigger = yes  
                }  
            }
		}
	}

	ep1_english_royalty_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_english 
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_english 
				}
				is_female = yes 
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
					portrait_era1_trigger = yes
                }  
            }
		}
	}

	ep2_english_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes 
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes 
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
		}
	}

	ep2_english_era2_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes 
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes 
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
		}
	}

	ep2_english_era3_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_era3_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }
				is_female = yes 
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
		}
	}
	
	english_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = epe_english 
				}
				NOT = { has_ep2_dlc_trigger = yes }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
		}
	}

	ep2_english_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes 
				is_female = yes
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
		}
	}

	ep2_english_era2_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes
                }
				is_female = yes  
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
		}
	}

	ep2_english_era4_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes
                }
				is_female = yes 
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}				
			}			
		}
	}	
	
####################################################################################################
##################
###French
##################
####################################################################################################

	french_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_french
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {
					CULTURE_INPUT = epe_french
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

    ep2_french_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ep2_western_era1_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_french
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_french
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes     
            }
        }
    }

    ep2_french_era2_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = western_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_french
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_french
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era2_trigger = yes     
            }
        }
    }

    ep2_french_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ep2_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_french
				}
				has_ep2_dlc_trigger = yes 
                OR = {
				portrait_era3_trigger = yes 
					portrait_era4_trigger = yes
                }
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_french
                } 
                has_ep2_dlc_trigger = yes   
                OR = {
                portrait_era3_trigger = yes     
					portrait_era4_trigger = yes
                }    
            }
        }
    }
    
        fp4_french_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear_2
                template = fp4_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_french
				}
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_religious_christian_trigger = yes
				}  
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_french
                } 
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                } 
				NOT = {
					portrait_religious_christian_trigger = yes
				}     
            }
        }
    }

	french_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_french
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_french_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_french
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

	ep2_french_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_french
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
		}
	}

	ep2_french_era3_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era3_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_french
				}
				has_ep2_dlc_trigger = yes 
                OR = {
				portrait_era3_trigger = yes 
					portrait_era4_trigger = yes
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
			}
		}
	}

	french_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}            
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}				
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }				
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_french_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes 
				is_female = yes 				 
			}			
		}
	}

	ep2_french_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}				
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes 				
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}				
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }				
			}			
		}
	}

	ep2_french_era3_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
                }
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}				
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
                }
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }
				is_female = yes				
			}			
		}
	}
	
	ep2_french_era4_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes				
			}			
		}
	}


	french_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}            
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_french_era2_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes 
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
			}			
		}
	}

	ep2_french_era3_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
                }
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
                }
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
				is_female = yes				
			}			
		}
	}	

	french_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_french 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}			
		}
	}

	ep1_french_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_french 
				}
			}
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_french 
				}
				is_female = yes				
			}			
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
					portrait_era2_trigger = yes  
                }  
            }
		}
	}

	ep1_french_royalty_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_french 
				}
			}
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_french 
				}
				is_female = yes				
			}			
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
					portrait_era1_trigger = yes
                }  
            }
		}
	}

	ep2_french_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes 
				is_female = yes				 
			}			
		}
	}

	ep2_french_era2_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes				
			}			
		}
	}

	ep2_french_era3_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_era3_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }
				is_female = yes				  
			}			
		}
	}
	
	french_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = epe_french 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_french_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes				
			}			
		}
	}

	ep2_french_era2_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes
                } 
				is_female = yes				 
			}			
		}
	}

	ep2_french_era4_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_french 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes
                } 
				is_female = yes				 
			}			
		}
	}	
	
####################################################################################################
##################
###East Slav
##################
####################################################################################################

	east_slav_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }
			}
		}
	}

	east_slav_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_east_slav } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_east_slav 
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_east_slav 
                }
				is_female = yes 
			}
		}
	}

	east_slav_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }
				is_female = yes    
			}
		}
	}

	east_slav_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_east_slav
                } 
				is_female = yes   
			}
		}
	}

	east_slav_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_east_slav 
                }
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_east_slav 
                }
				is_female = yes 
			}
		}
	}	
	
####################################################################################################
##################
###Balto-Finnic
##################
####################################################################################################


	balto_finnic_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = balto_finnic_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
			}
		}
	}

	balto_finnic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = balto_finnic_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_balto_finnic } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_balto_finnic 
                }
				has_fp1_dlc_trigger = yes
			}
		}
	}

	balto_finnic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = balto_finnic_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
				is_female = yes
			}
		}
	}

	balto_finnic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = balto_finnic_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
				is_female = yes
			}
		}
	}

	balto_finnic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = balto_finnic_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_balto_finnic 
                }
				has_fp1_dlc_trigger = yes
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_balto_finnic 
                }
				has_fp1_dlc_trigger = yes
				is_female = yes
			}
		}
	}	
	
####non DLC Balto-Finnic

	non_dlc_balto_finnic_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}

	non_dlc_balto_finnic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_balto_finnic } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_balto_finnic 
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}

	non_dlc_balto_finnic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}

	non_dlc_balto_finnic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}

	non_dlc_balto_finnic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_balto_finnic 
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}	
	
####################################################################################################
##################
###West Slav
##################
####################################################################################################

	west_slav_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

    ep2_west_slav_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = early_west_slav_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes     
            }
        }
    }

    ep2_west_slav_era2_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = western_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era2_trigger = yes     
            }
        }
    }

    ep2_west_slav_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ep2_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
              mode = add
              gene = headgear_CFP
              template = no_headgear
              range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
                OR = {
					portrait_era3_trigger = yes 
					portrait_era4_trigger = yes
                }
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                } 
                has_ep2_dlc_trigger = yes   
                OR = {
                	portrait_era3_trigger = yes     
					portrait_era4_trigger = yes
                }    
            }
        }
    }
    
    fp4_west_slav_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear_2
                template = fp4_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_religious_christian_trigger = yes
				}  
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                } 
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_religious_christian_trigger = yes
				}     
            }
        }
    }	

	west_slav_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_west_slav_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_west_slav_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

	ep2_west_slav_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
		}
	}

	ep2_west_slav_era3_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era3_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
				portrait_era3_trigger = yes 
			}
			modifier = {
				add = 50
				portrait_low_nobles_clothing_trigger = {  
					CULTURE_INPUT = epe_west_slav 
				}
				has_ep2_dlc_trigger = yes
				OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
				}
			}
			modifier = {
				add = 50
				portrait_low_nobles_clothing_trigger = {  
					CULTURE_INPUT = epe_west_slav 
				}
				has_ep2_dlc_trigger = yes
				OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
				}
				is_female = yes
			}
		}
	}

	west_slav_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }				
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_west_slav_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_west_slav_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes
			}
		}
	}

	ep2_west_slav_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
			}
		}
	}

	ep2_west_slav_era3_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
                OR = {
					portrait_era3_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}
	

	ep2_west_slav_era4_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes
			}
		}
	}	

	west_slav_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}


	ep2_west_slav_era2_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
			}
		}
	}

	ep2_west_slav_era3_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
                OR = {
					portrait_era3_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}		
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	west_slav_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_west_slav 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep1_west_slav_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_west_slav 
				}
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
					portrait_era2_trigger = yes  
                }  
            }
		}
	}

	ep2_west_slav_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_west_slav_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes
			}
		}
	}

	ep2_west_slav_era2_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes
			}
		}
	}

	ep2_west_slav_era3_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_era3_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }
				is_female = yes  
			}
		}
	}
	
	west_slav_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = epe_west_slav 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = epe_west_slav 
				}
				NOT = { has_ep2_dlc_trigger = yes }
				is_female = yes
			}
		}
	}

	ep2_west_slav_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_west_slav_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes 
				is_female = yes 
			}
		}
	}

	ep2_west_slav_era2_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes
                }
				is_female = yes  
			}
		}
	}

	ep2_west_slav_era4_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes
                }
				is_female = yes  
			}
		}
	}
	
####################################################################################################
##################
###Gaelic/Irish 
##################
####################################################################################################

	gaelic_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gaelic_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }
			}
		}
	}

	gaelic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gaelic_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_gaelic } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_gaelic 
                }
			}
		}
	}

	gaelic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gaelic_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }
				is_female = yes
			}
		}
	}

	gaelic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gaelic_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }
				is_female = yes
			}
		}
	}

	gaelic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gaelic_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_gaelic 
                }
			}
		}
	}
	
####################################################################################################
##################
###Eastern Turkic/Default Turk
##################
####################################################################################################

	eastern_turk_commoners_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
                portrait_era1_trigger = yes 				
			}
		}
	}

	eastern_turk_low_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_eastern_turk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk 
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk 
                }
				is_female = yes
                portrait_era1_trigger = yes 				
			}
		}
	}

	eastern_turk_high_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				is_female = yes
                portrait_era1_trigger = yes 				
			}
		}
	}

	eastern_turk_royalty_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				is_female = yes
                portrait_era1_trigger = yes 				
			}
		}
	}

	eastern_turk_imperial_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				is_female = yes
                portrait_era1_trigger = yes 				
			}
		}
	}
	
	########Non Persianized	
	
	eastern_turk_commoners_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}				
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 				
			}
		}
	}

	eastern_turk_low_nobles_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_eastern_turk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}				
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes 			
			}
		}
	}

	eastern_turk_high_nobles_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}				
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes				
			}
		}
	}

	eastern_turk_royalty_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}					
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }  				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}					
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes 				
			}
		}
	}

	eastern_turk_imperial_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}				
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
					}
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes			
			}
		}
	}
	
	########Persianized	
	
	eastern_turk_commoners_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }			
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }				
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 				
			}
		}
	}

	eastern_turk_low_nobles_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_eastern_turk_muslim } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk_muslim 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk_muslim 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes			
			}
		}
	}

	eastern_turk_high_nobles_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }			
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes			
			}
		}
	}

	eastern_turk_royalty_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }
				
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }  				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }
				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes 				
			}
		}
	}

	eastern_turk_imperial_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes			
			}
		}
	}	
	
####################################################################################################
##################
###Seljuk Turk
##################
####################################################################################################

	seljuk_turk_commoners_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 				
			}
		}
	}

	seljuk_turk_low_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_seljuk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_seljuk 
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_seljuk 
                }
                portrait_era1_trigger = yes 
				is_female = yes				
			}
		}
	}

	seljuk_turk_high_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 
				is_female = yes				
			}
		}
	}

	seljuk_turk_royalty_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 	
				is_female = yes			
			}
		}
	}

	seljuk_turk_imperial_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = eastern_turk_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_seljuk 
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_seljuk 
                }
                portrait_era1_trigger = yes 	
				is_female = yes			
			}
		}
	}

	########Persianized	
	
	seljuk_turk_commoners_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }			
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }				
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 				
			}
		}
	}

	seljuk_turk_low_nobles_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_seljuk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_seljuk 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_seljuk 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes 			
			}
		}
	}

	seljuk_turk_high_nobles_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }			
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes				
			}
		}
	}

	seljuk_turk_royalty_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
				
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }  				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes  				
			}
		}
	}

	seljuk_turk_imperial_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = seljuk_turk_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_seljuk 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_seljuk 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes 			
			}
		}
	}	
	
####################################################################################################
##################
### Roman
##################
####################################################################################################

	roman_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = roman_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000 # always pick the laurel wreath over cultural imperial headwear.
				culture = {
					has_cultural_pillar = heritage_latin
				}
				portrait_epe_roman_imperial_trigger = yes
			}
		}
	}
	
####################################################################################################
##################
### Iron Crown of Lombardy
##################
####################################################################################################

	italian_crown_of_lombardy = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_crown_of_lombardy
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 500 # always pick the Crown of Lombardy over royal headwear.
				culture = {
					has_cultural_pillar = heritage_latin
				}
				portrait_epe_crown_of_lombardy_trigger = yes
				has_ep1_dlc_trigger = yes
			}
		}
	}

####################################################################################################
##################
###ABBASID Expanded
##################
####################################################################################################
##################Early Abbassid 

	early_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes 				
			}
		}
	}
	
	early_abbasid_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                portrait_era1_trigger = yes		
				is_female = yes		
			}
		}
	}	
	
	early_abbasid_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = dde_abbasid } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
				is_female = yes				
			}
		}
	}
	
	early_abbasid_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes 
				is_female = yes					
			}
		}
	}

	early_abbasid_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes 
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes 
				has_dde_abbasid_flavor_dlc_trigger = yes	
				is_female = yes				
			}
			modifier = {
				factor = 0
				portrait_fp2_iberian_muslim_clothing_trigger = yes
			}
		}
	}
	
	early_abbasid_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                portrait_era1_trigger = yes 
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                portrait_era1_trigger = yes 
				has_dde_abbasid_flavor_dlc_trigger = yes	
				is_female = yes			
			}
		}
	}	
	
##################Early Abbassid Non DLC 

	non_dlc_early_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
                 has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = dde_abbasid 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
                 has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
		}
	}

	non_dlc_early_abbasid_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                portrait_era1_trigger = yes	
                NOT = {
                 has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
		}
	}

	non_dlc_early_abbasid_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = dde_abbasid } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
                	has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes				
			}
		}
	}

	non_dlc_early_abbasid_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                } 
                portrait_era1_trigger = yes
                NOT = {
                	has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                } 
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes			
			}
		}
	}

	non_dlc_early_abbasid_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
            		has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes			
			}
		}
	}

	non_dlc_early_abbasid_mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                portrait_era1_trigger = yes
                NOT = {
                	has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes				
			}
		}
	}

##################Abbassid Non DLC 

	non_dlc_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = dde_abbasid 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }				
			}
		}
	}

	non_dlc_abbasid_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes				
			}
		}
	}

	non_dlc_abbasid_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = dde_abbasid } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes				
			}
		}
	}

	non_dlc_abbasid_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                } 
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }
                NOT = {
                 has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                } 
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes				
			}
		}
	}

	non_dlc_abbasid_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }
                NOT = {
                 has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes				
			}
		}
	}

	non_dlc_abbasid_mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                OR = {
                    portrait_era2_trigger = yes  				
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }
                NOT = {
                 has_dde_abbasid_flavor_dlc_trigger = yes
                }				
				is_female = yes				
			}
		}
	}
	

####################################################################################################
##################
###North africa/maghreb
##################
####################################################################################################

####################################################################################################
##################
###Baranis - settled/Coastal Berber
##################
####################################################################################################

	baranis_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_common
				range = { 0.48 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_maghreb 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
			}
		}
	}

	baranis_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_low_nobility
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_maghreb
				}
                portrait_mayor_headgear_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
			}
		}
	}

	baranis_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_low_nobility
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_maghreb } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
				is_female = yes				
			}
		}
	}

	baranis_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_high_nobility
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes
				is_female = yes 
			}
		}
	}

	baranis_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_royalty
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes
				is_female = yes 
			}
		}
	}
	
	baranis_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_imperial
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_maghreb 
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
				has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_maghreb 
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
				is_female = yes 
			}
		}
	}
	
####################################################################################################
##################
###Butr/zaghawa - nomadic Berber
##################
####################################################################################################

	butr_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_common
				range = { 0 0.46 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_maghreb 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
			}
		}
	}

	butr_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_low_nobility
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_maghreb
				}
                portrait_mayor_headgear_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
			}
		}
	}

	butr_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_low_nobility
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_maghreb } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
				is_female = yes				
			}
		}
	}

	butr_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_high_nobility
				range = { 0 0.49 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes
				is_female = yes 
			}
		}
	}

	butr_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_royalty
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes
				is_female = yes 
			}
		}
	}
	
	butr_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_imperial
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_maghreb 
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
				has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_maghreb 
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
				is_female = yes 
			}
		}
	}	
	
	##########################################################################
	#### North africa Non-dlc
	##########################################################################

	maghreb_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_maghreb 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
		}
	}

	maghreb_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_maghreb
				}
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
		}
	}

	maghreb_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_maghreb } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
				is_female = yes				
			}
		}
	}

	non_dlc_maghreb_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}

	non_dlc_maghreb_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_maghreb
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}
	
	non_dlc_maghreb_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_maghreb 
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_maghreb 
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}	

    ####################################################################################################
    ##################
    ###Non-DLC Iranian 
    ##################
    ####################################################################################################
	

	non_dlc_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_non_dlc_iranian 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
		}
	}

	non_dlc_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_non_dlc_iranian
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
		}
	}

	non_dlc_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_non_dlc_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
				is_female = yes				
			}
		}
	}

	non_dlc_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}

	non_dlc_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}
	
	non_dlc_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}	

####################################################################################################
##################
###EPE-Eastern non islamic Iranian
##################
####################################################################################################

	eastern_non_islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_commoner
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes 					
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_non_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes 					
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				# NOT = {
				# 	portrait_commoner_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	eastern_non_islamic_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_non_islamic_iranian
				}
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_eastern_non_islamic_iranian
				}				
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				# NOT = {
				# 	portrait_mayor_headgear_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 60
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_non_islamic_iranian
				}
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_eastern_non_islamic_iranian
				}				
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				is_female = yes
				# NOT = {
				# 	portrait_mayor_headgear_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	eastern_non_islamic_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_non_islamic_iranian } 
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				# NOT = {
				# 	portrait_low_nobles_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				is_female = yes
				# NOT = {
				# 	portrait_low_nobles_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	eastern_non_islamic_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}							
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				is_female = yes							
			}
		}
	}

	eastern_non_islamic_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}				
				# NOT = {
				# 	portrait_royalty_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				is_female = yes				
				# NOT = {
				# 	portrait_royalty_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}
	
	eastern_non_islamic_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_imperial
				range = { 0 1 }	# For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}				
				# NOT = {
				# 	portrait_imperial_nobles_headgear_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

####################################################################################################
##################
### Western Iranian non-muslim
##################
####################################################################################################

	Western_non_islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = Western_iranian_commoner
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_non_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}				
				# NOT = {
				# 	portrait_commoner_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	Western_non_islamic_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = Western_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_non_islamic_iranian
				}
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_western_non_islamic_iranian
				}				
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}				
				# NOT = {
				# 	portrait_mayor_headgear_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	Western_non_islamic_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = Western_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_non_islamic_iranian } 
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}				
				# NOT = {
				# 	portrait_low_nobles_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}
				is_female = yes				
				# NOT = {
				# 	portrait_low_nobles_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	Western_non_islamic_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = Western_iranian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}
				is_female = yes				
			}
		}
	}

	Western_non_islamic_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = Western_iranian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}								
				# NOT = {
				# 	portrait_royalty_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}
				is_female = yes								
				# NOT = {
				# 	portrait_royalty_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}
	
	Western_non_islamic_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = Western_iranian_imperial
				range = { 0 1 }	# For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				highest_held_title_tier = tier_empire
				NOR = {
					AND = {
						is_ruler = yes
						has_government = mercenary_government
					}
					has_government = republic_government
					AND = {
						is_ruler = yes
						has_government = theocracy_government
					}
				}
				portrait_epe_non_islamic_iranian_clothing_trigger = yes
				portrait_epe_western_non_islamic_iranian_clothing_trigger = yes				
				NOT = {
					portrait_epe_hindu_iranian_clothing_trigger = yes
				}
				NOT = {
					portrait_epe_eastern_non_islamic_iranian_clothing_trigger = yes
				}				
				# NOT = {
				# 	portrait_epe_sino_iranian_clothing_trigger = yes
				# }				
			}
		}
	}

	Western_non_islamic_iranian_imperial_consort = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = Western_iranian_imperial_consort
				range = { 0 1 }	# For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							this.highest_held_title_tier < this.primary_spouse.highest_held_title_tier
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = {
									is_ruler = yes
									has_government = theocracy_government
								}
							}
							NOT = {
								AND = {
									is_ruler = yes
									has_government = mercenary_government
								}
							}							# Blocked for mercenaries
							NOT = {
								has_government = republic_government
							}
							portrait_epe_non_islamic_iranian_clothing_spouse_trigger = yes
							portrait_epe_western_non_islamic_iranian_clothing_spouse_trigger = yes							
							NOT = {
								portrait_epe_hindu_iranian_clothing_spouse_trigger = yes
							}
							NOT = {
								portrait_epe_eastern_non_islamic_iranian_clothing_spouse_trigger = yes
							}							
						}
					}
				}
			}
		}
	}
	
	####################################################################################################
	##################
	###Sino Iranian
	##################
	####################################################################################################

	# sino_iranian_commoners_era1 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = han_chinese_common
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}	
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 80
    #             portrait_commoner_headgear_fallback_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             portrait_era1_trigger = yes 								
	# 		}
	# 		modifier = { # Non-european jesters should not use the jester hat
	# 			add = 1000
    #             portrait_jester_trigger = {  
    #                 CULTURE_INPUT = epe_sino_iranian 
    #             }
	# 		}
	# 		modifier = {
	# 			add = 20
    #             portrait_commoner_clothing_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             portrait_era1_trigger = yes 								
	# 		}
	# 	}
	# }

	# sino_iranian_mayors_era1 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = han_chinese_low_nobility
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}	
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 60
	# 			portrait_mayor_headgear_trigger = {
	# 				CULTURE_INPUT = epe_sino_iranian
	# 			}
    #             portrait_era1_trigger = yes 								
	# 		}
	# 	}
	# }

	# sino_iranian_low_nobles_era1 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = han_chinese_low_nobility
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}	
	# 	weight = {
	# 		base = 0
	# 		court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_sino_iranian } 
	# 		modifier = {
	# 			add = 50
    #             portrait_low_nobles_clothing_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             portrait_era1_trigger = yes 								
	# 		}
	# 	}
	# }

	# sino_iranian_high_nobles_era1 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = han_chinese_high_nobility
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}		
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 50
    #             portrait_high_nobles_headgear_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             portrait_era1_trigger = yes 								
	# 		}
	# 	}
	# }

	# sino_iranian_royalty_era1 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = han_chinese_royalty
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}		
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 50
    #             portrait_royalty_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             portrait_era1_trigger = yes 								
	# 		}
	# 	}
	# }
	
	# sino_iranian_imperial_era1 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = han_chinese_imperial
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}	
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 50
    #             portrait_imperial_nobles_headgear_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian 
    #             }
    #             portrait_era1_trigger = yes 								
	# 		}
	# 	}
	# }

	# ##################
	# ###Sino Iranian Era 2-4
	# ##################

	# sino_iranian_commoners_era2_4 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = eastern_turk_common
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}	
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 80
    #             portrait_commoner_headgear_fallback_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             OR = {
    #                 portrait_era2_trigger = yes  				
    #             	portrait_era3_trigger = yes  
    #             	portrait_era4_trigger = yes  
    #             }								
	# 		}
	# 		modifier = { # Non-european jesters should not use the jester hat
	# 			add = 1000
    #             portrait_jester_trigger = {  
    #                 CULTURE_INPUT = epe_sino_iranian 
    #             }
	# 		}
	# 		modifier = {
	# 			add = 20
    #             portrait_commoner_clothing_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             OR = {
    #                 portrait_era2_trigger = yes  				
    #             	portrait_era3_trigger = yes  
    #             	portrait_era4_trigger = yes  
    #             }								
	# 		}
	# 	}
	# }

	# sino_iranian_mayors_era2_4 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = eastern_turk_low_nobility
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}	
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 60
	# 			portrait_mayor_headgear_trigger = {
	# 				CULTURE_INPUT = epe_sino_iranian
	# 			}
    #             OR = {
    #                 portrait_era2_trigger = yes  				
    #             	portrait_era3_trigger = yes  
    #             	portrait_era4_trigger = yes  
    #             }							
	# 		}
	# 	}
	# }

	# sino_iranian_low_nobles_era2_4 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = eastern_turk_low_nobility
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}	
	# 	weight = {
	# 		base = 0
	# 		court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_sino_iranian } 
	# 		modifier = {
	# 			add = 50
    #             portrait_low_nobles_clothing_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             OR = {
    #                 portrait_era2_trigger = yes  				
    #             	portrait_era3_trigger = yes  
    #             	portrait_era4_trigger = yes  
    #             }								
	# 		}
	# 	}
	# }

	# sino_iranian_high_nobles_era2_4 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = eastern_turk_high_nobility
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}		
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 50
    #             portrait_high_nobles_headgear_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             OR = {
    #                 portrait_era2_trigger = yes  				
    #             	portrait_era3_trigger = yes  
    #             	portrait_era4_trigger = yes  
    #             }									
	# 		}
	# 	}
	# }

	# sino_iranian_royalty_era2_4 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = eastern_turk_royalty
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}		
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 50
    #             portrait_royalty_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian
    #             }
    #             OR = {
    #                 portrait_era2_trigger = yes  				
    #             	portrait_era3_trigger = yes  
    #             	portrait_era4_trigger = yes  
    #             }	
	# 		}
	# 	}
	# }
	
	# sino_iranian_imperial_era2_4 = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = headgear
	# 			template = eastern_turk_imperial
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}	
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 50
    #             portrait_imperial_nobles_headgear_trigger = {
    #                 CULTURE_INPUT = epe_sino_iranian 
    #             }
    #             OR = {
    #                 portrait_era2_trigger = yes  				
    #             	portrait_era3_trigger = yes  
    #             	portrait_era4_trigger = yes  
    #             }									
	# 		}
	# 	}
	# }		

	####Hindu Iranians

	hindu_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_hindu_iranian 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }				
			}
		}
	}

	hindu_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_hindu_iranian
				}				
			}
		}
	}

	hindu_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_hindu_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
				is_female = yes				
			}
		}
	}

	hindu_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
				is_female = yes
			}
		}
	}

	hindu_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
				is_female = yes
			}
		}
	}
	
	hindu_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian 
                }			
			}
		}
	}	
	
	ep1_hindu_iranian_royalty = { 
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_hindu_iranian
				}
				culture = {
					has_cultural_pillar = heritage_iranian
				}
				has_ep1_dlc_trigger = yes
			}
		}
	}

	ep1_hindu_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian 
                }
				culture = {
					has_cultural_pillar = heritage_iranian
				}
				has_ep1_dlc_trigger = yes
			}
		}
	}	

	####################################################################################################
	##################
	###Early Islamic Iranian 
	##################
	####################################################################################################

	early_islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes			
			}
		}
	}
	non_dlc_early_islamic_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes		
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				portrait_era1_trigger = yes
			}
		}
	}
	
	early_islamic_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes	
                has_fp3_dlc_trigger = yes				
			}
		}
	}

	non_dlc_early_islamic_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes		
				is_female = yes		
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				portrait_era1_trigger = yes
			}			
		}
	}

	early_islamic_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes
                has_fp3_dlc_trigger = yes  				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes
                has_fp3_dlc_trigger = yes 
				is_female = yes 				
			}
		}
	}

	non_dlc_early_islamic_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes
				is_female = yes				
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				portrait_era1_trigger = yes
			}			
		}
	}

	early_islamic_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}					
                portrait_era1_trigger = yes		
                has_fp3_dlc_trigger = yes 				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}					
                portrait_era1_trigger = yes		
                has_fp3_dlc_trigger = yes 
				is_female = yes				
			}
		}
	}

	early_islamic_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes	
				is_female = yes			
			}
		}
	}

	early_islamic_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_islamic_iranian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
				is_female = yes				
                portrait_era1_trigger = yes			
			}
		}
	}
	
	####Abbasid Tahirids	

	tahirid_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_tahirid
                }
                portrait_era1_trigger = yes 				
			}
		}
	}
	
	tahirid_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_tahirid
				}
                portrait_era1_trigger = yes				
			}
		}
	}	
	
	tahirid_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_tahirid } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_tahirid
                }
                portrait_era1_trigger = yes				
			}
		}
	}
	
	tahirid_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_tahirid
                }
                portrait_era1_trigger = yes 				
			}
		}
	}

	tahirid_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = early_abbasid_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_tahirid
                }
                portrait_era1_trigger = yes 		
			}
		}
	}
	
	tahirid_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_tahirid 
                }
                portrait_era1_trigger = yes 			
			}
		}
	}	

	####################################################################################################
	##################
	###High medieval Islamic Iranian era 2-3
	##################
	####################################################################################################	

	islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = islamic_iranian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }				
			}
		}
	}

	non_dlc_islamic_iranian_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }	
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			}
		}
	}
	
	islamic_iranian_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = islamic_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes				
			}
		}
	}

	non_dlc_islamic_iranian_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
				is_female = yes			
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			}			
		}
	}

	islamic_iranian_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = islamic_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes  				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes 
				is_female = yes 				
			}
		}
	}

	non_dlc_islamic_iranian_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
				is_female = yes			
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			}			
		}
	}

	islamic_iranian_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = islamic_iranian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes 				
			}
			modifier = {
				add = 60
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes
				is_female = yes 				
			}
		}
	}

	islamic_iranian_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = islamic_iranian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	islamic_iranian_mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = islamic_iranian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	####################################################################################################
	##################
	###Islamic Iranian 
	##################
	####################################################################################################	

	late_islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = late_islamic_iranian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
					portrait_era4_trigger = yes  
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
					portrait_era4_trigger = yes  
                }				
			}
		}
	}

	non_dlc_late_islamic_iranian_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}			
                OR = {
					portrait_era4_trigger = yes  
				}	
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				OR = {
					portrait_era4_trigger = yes  
                }
			}
		}
	}
	
	late_islamic_iranian_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = late_islamic_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes				
			}
		}
	}

	non_dlc_late_islamic_iranian_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
					portrait_era4_trigger = yes  
				}			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
					portrait_era4_trigger = yes  
				}
				is_female = yes			
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				OR = {
					portrait_era4_trigger = yes  
                }
			}			
		}
	}

	late_islamic_iranian_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = late_islamic_iranian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes  				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes  
				is_female = yes				
			}
		}
	}

	non_dlc_late_islamic_iranian_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }			
                OR = {
					portrait_era4_trigger = yes  
				}			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }			
                OR = {
					portrait_era4_trigger = yes  
				}
				is_female = yes			
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				OR = {
					portrait_era4_trigger = yes  
                }
			}			
		}
	}

	late_islamic_iranian_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = late_islamic_iranian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes 				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes
				is_female = yes 				
			}
		}
	}

	late_islamic_iranian_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = late_islamic_iranian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
					portrait_era4_trigger = yes  
                }
			
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	late_islamic_iranian_mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = late_islamic_iranian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
                OR = {
					portrait_era4_trigger = yes  
                }
			
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes
			}
		}
	}
	
	####################################################################################################
	##################
	###Han Chinese
	##################
	####################################################################################################

	han_chinese_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_han_chinese 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }				
			}
		}
	}

	han_chinese_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_han_chinese
				}				
			}
		}
	}

	han_chinese_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_han_chinese } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }				
			}
		}
	}

	han_chinese_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }
				
			}
		}
	}

	han_chinese_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }
				
			}
		}
	}
	
	han_chinese_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_han_chinese 
                }		
			}
		}
	}

	####################################################################################################
	##################
	###Uyghur
	##################
	####################################################################################################

	uyghur_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uyghur_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_uyghur 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }
				
			}
		}
	}

	uyghur_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uyghur_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_uyghur
				}				
			}
		}
	}

	uyghur_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uyghur_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_uyghur } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }				
			}
		}
	}

	uyghur_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uyghur_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }
				
			}
		}
	}

	uyghur_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uyghur_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }
				
			}
		}
	}
	
	uyghur_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uyghur_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			  mode = add
			  gene = headgear_CFP
			  template = no_headgear
			  range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_uyghur 
                }
			
			}
		}
	}	

	####Western Spymaster
	western_spymaster_headgear = {
		# outfit_tags = { rank_headgear } 
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = epe_spymaster_headgears
				accessory = male_epe_western_spy_master_hood				
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 110
				age > 17
				exists = this
				OR = {
					AND = {
						has_council_position = councillor_spymaster
						highest_held_title_tier < tier_county
						is_clergy = no
					}
				}
				NOT = {
					portrait_wear_armor_trigger = yes
					OR = {
						has_government = theocracy_government
					}
				}				
				OR = {
					portrait_byzantine_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
					portrait_western_clothing_trigger = yes
					portrait_epe_french_clothing_trigger = yes
					portrait_epe_english_clothing_trigger = yes
					portrait_epe_gaelic_clothing_trigger = yes
					portrait_epe_east_slav_clothing_trigger = yes
					portrait_epe_balto_finnic_clothing_trigger = yes
					portrait_epe_georgian_clothing_trigger = yes
					portrait_epe_bulgarian_clothing_trigger = yes
					portrait_epe_armenian_clothing_trigger = yes
					portrait_epe_south_slav_clothing_trigger = yes
				}
			}
		}
	}

	####MENA Spymaster
	mena_spymaster_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = epe_spymaster_headgears
				accessory = male_headgear_epe_mena_spy_master_01	
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 110
				age > 17
				exists = this
				OR = {
					AND = {
						has_council_position = councillor_spymaster
						highest_held_title_tier < tier_county
						is_clergy = no						
					}
				}
				NOT = {
					portrait_wear_armor_trigger = yes
					OR = {
						has_government = theocracy_government
					}
				}				
				OR = {
					portrait_mena_clothing_trigger = yes
					portrait_epe_maghreb_clothing_trigger = yes
					portrait_epe_seljuk_clothing_trigger = yes
					portrait_dde_abbasid_clothing_trigger = yes
					portrait_epe_islamic_iranian_clothing_trigger = yes
					portrait_epe_non_islamic_iranian_clothing_trigger = yes
					portrait_epe_hindu_iranian_clothing_trigger = yes		
					portrait_epe_bedouin_clothing_trigger = yes						
				}
			}
		}
	}

####################################################################################################
##################
###Brythonic/Welsh
##################
####################################################################################################

	brythonic_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

    ep2_brythonic_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = brythonic_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes     
            }
        }
    }

    ep2_brythonic_era2_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = brythonic_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era2_trigger = yes     
            }
        }
    }

    ep2_brythonic_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ep2_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
				has_ep2_dlc_trigger = yes 
                OR = {
					portrait_era3_trigger = yes 
					portrait_era4_trigger = yes
                }
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                } 
                has_ep2_dlc_trigger = yes   
                OR = {
             		portrait_era3_trigger = yes     
					portrait_era4_trigger = yes
                }    
            }
        }
    }
    

    fp4_brythonic_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear_2
                template = fp4_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_religious_christian_trigger = yes
				}  
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                } 
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                } 
				NOT = {
					portrait_religious_christian_trigger = yes
				}     
            }
        }
    }	

	brythonic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                NOT = { has_ep2_dlc_trigger = yes }
				is_female = yes
			}
		}
	}

	ep2_brythonic_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes
			}
		}
	}

	ep2_brythonic_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes
			}
		}
	}

	ep2_brythonic_era3_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era3_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_brythonic
				}
				has_ep2_dlc_trigger = yes 
				portrait_era3_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	brythonic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                NOT = { has_ep2_dlc_trigger = yes }
				is_female = yes
			}
		}
	}

	ep2_brythonic_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes 				
			}			
		}
	}

	ep2_brythonic_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes 				
			}			
		}
	}

	ep2_brythonic_era3_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }				
                OR = {
					portrait_era3_trigger = yes  
                }
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }				
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes 				
			}

		}
	}
	
	ep2_brythonic_era3_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}					
                OR = {
					portrait_era3_trigger = yes  
                }
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes 				
			}

		}
	}	
	
	
	ep2_brythonic_era4_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes 				
			}

		}
	}	

	brythonic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_brythonic 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep1_brythonic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_brythonic 
				}
			}
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_brythonic 
				}
				is_female = yes 				
			}			
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
					portrait_era2_trigger = yes  
                }  
            }
		}
	}

	ep1_brythonic_royalty_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_brythonic 
				}
			}
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_brythonic 
				}
				is_female = yes 				
			}			
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
					portrait_era1_trigger = yes
                }  
            }
		}
	}

	ep2_brythonic_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes 				
			}			
		}
	}

	ep2_brythonic_era2_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes 				
			}			
		}
	}

	ep2_brythonic_era3_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_era3_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }
				is_female = yes 				  
			}			
		}
	}
	
	brythonic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = western_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = epe_brythonic 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_brythonic_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era1_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes 
				is_female = yes 				 
			}			
		}
	}

	ep2_brythonic_era2_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = brythonic_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era2_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes
                }
				is_female = yes  
			}
		}
	}

	ep2_brythonic_era4_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_CFP
				template = no_headgear
				range = { 0 1 }
			}
			accessory = { # Can be combined with veils
				mode = add
				gene = additive_headgear
				template = ep2_western_era3_veils
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes
                }
				is_female = yes 				  
			}			
		}
	}	

	# fp4_western_era3_unlanded_nobles = {
    #     dna_modifiers = {
    #         accessory = {
    #             mode = add
    #             gene = headgear
	# 	template = ep2_western_era3_nobility
    #             range = { 0 1 } # For the randomness to work correctly
    #         }
    #     }   
    #     weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 50
	# 			court_fashion_level_4_headgear_trigger = {
	# 				CULTURE_INPUT = western
	# 			}
	# 			has_ep2_dlc_trigger = yes 
	# 			portrait_era3_trigger = yes 
	# 			is_lowborn = no
	# 		}
    #         modifier = {
    #             add = 20
    #             portrait_low_nobles_clothing_trigger = {  
    #                 CULTURE_INPUT = western
    #             } 
    #             OR = {
    #                 portrait_era3_trigger = yes                
    #                 portrait_era4_trigger = yes
    #             }
    #             NOT = {
    #                 portrait_religious_christian_trigger = yes
    #             }
	# 			is_lowborn = no    
    #         }
    #         modifier = {
    #             add = 20
    #             portrait_low_nobles_clothing_trigger = {  
    #                 CULTURE_INPUT = western
    #             } 
    #             OR = {
    #                 portrait_era3_trigger = yes                
    #                 portrait_era4_trigger = yes
    #             } 
    #             NOT = {
    #                 portrait_religious_christian_trigger = yes
    #             } 
	# 			is_lowborn = no   
    #             is_female = yes
    #         }
    #     }
    # }
	
	
}
